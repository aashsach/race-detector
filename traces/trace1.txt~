1: THREADINIT(t1)
2: FORK(t1)
3: WRITE(t1, obj1)
	4: THREADINIT(t2)
	5: WRITE(t2, obj2)
	6: WRITE(t2, obj1)
	7: FORK(t2, t3)
		8: THREADINIT(t3)
		9: READ(t3, obj1)
	10: LOCK(t2, lck1)
		11: WRITE(t3, obj2)
	12: READ(t2, obj2)
	13: UNLOCK(t2, lck1)
14: LOCK(t1, lck1)
15: WRITE(t1, obj2)
		16: THREADEXIT(t3)
	17: JOIN(t2, t3)
18: UNLOCK(t1, lck1)
	19: THREADEXIT(t2)
20: JOIN(t1, t2)
21: READ(t1, obj2)
22: THREADEXIT(t1)
